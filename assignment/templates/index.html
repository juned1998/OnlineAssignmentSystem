{% extends "index_base.html" %}
{% block title %} Assignment : Home {%endblock%}
{% block content %}
<div class="row">

<div class="col-md-4">

   <div class="mx-4 my-3 category ">
      <h5 class="align-top">Filter Question</h5>
      <form id="filterForm" method="GET" action="{%url 'FilterQuestions' %}">
        <div class="form-group">
          <select name="coursefilter" class="form-control" id="courseField">
            <option value="">Select Course</option>
            {% for course in  courses %}
            <option value="{{course}}">{{course}}</option>
            {% endfor %}
          </select>
        </div>
        <input class="btn btn-info" type="submit" value="submit">

      </form>
    </div>

</div>
<div class="col-md-8">
  {% if question_list %}

    {% for question in question_list %}

      <div class = "Qbox col-md-10 my-3 " style = "border : solid 1px #ddd">
        <h6 class="my-3 question-details" >{{question.assignment.course}} | Assignment no.{{question.assignment.number}}</h6>
        <h3 style="font-family : serif ;"> {{question.title}}</h3>
        <a href="{{ question.get_absolute_url }}" class=" my-1 viewAnswers" > view all {{question.getPublishedAnswerCount}} answers</a>
      </div>


    {% endfor %}

  {% else %}
    <p>There are no questions.</p>
  {% endif %}
</div>
</div>
<script>
   $("#filterForm").change(function () {
     var url = $("#filterForm").attr("subject-url");  // get the url of the `load_subject` view
     var branchId = $(this).val();  // get the selected country ID from the HTML input

     $.ajax({                       // initialize an AJAX request
       url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
       data: {
         'branch': branchId\
         'branch': branchId        // add the country id to the GET parameters
       },
       success: function (data) {   // `data` is the return of the `load_cities` view function
         $("#courseField").html(data);  // replace the contents of the city input with the data that came from the server
       }
     });

   });




</script>

{% endblock %}
